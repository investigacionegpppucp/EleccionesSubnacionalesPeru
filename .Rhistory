bookdown::render_book("index.Rmd")
library(googlesheets4)
distrital=read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vQMLHdXuz-ykbp9VmJJGhtl0vdNeeMxjgod2YrYLt9UB3RdX8tb-LEbZr2PVV41Sj384LuK1quysfNj/pub?gid=30541803&single=true&output=csv",dec=".")
distrital_mito1 =distrital%>%
filter(Eleccion=="Distrital 2022")%>%
dplyr::select(Region,V_emitidos,V_validos,Electores,Eleccion)%>%
unique()
View(distrital_mito1)
View(distrital)
distrital_mito1 =distrital%>%
filter(Eleccion=="Distrital 2022")%>%
dplyr::select(Region,Provincia,Distrito, UBIGEO,V_emitidos,V_validos,Electores,Eleccion)%>%
unique()
View(distrital_mito1)
View(distrital)
View(distrital_mito1)
distrital_mito1$UBIGEO=ifelse(99999<distrital_mito1$UBIGEO&distrital_mito1$UBIGEO<100000,paste(0,distrital_mito1$UBIGEO, sep = ""), distrital_mito1$UBIGEO)
distrital_mito1$UBIGEO=ifelse(99999<distrital_mito1$UBIGEO&distrital_mito1$UBIGEO<100000,paste(0,distrital_mito1$UBIGEO, sep = ""), distrital_mito1$UBIGEO)
distrital_mito1$UBIGEO=ifelse(999999<distrital_mito1$UBIGEO&distrital_mito1$UBIGEO<1000000,paste(0,distrital_mito1$UBIGEO, sep = ""), distrital_mito1$UBIGEO)
distrital_mito1$UBIGEO=ifelse(9999<distrital_mito1$UBIGEO&distrital_mito1$UBIGEO<100000,paste(0,distrital_mito1$UBIGEO, sep = ""), distrital_mito1$UBIGEO)
mapdist=readOGR("LIMITE_DISTRITAL_2020_INEI.shp")
geodist22=merge(mapdist,dist_m2_2022,by.x="UBIGEO",by.y="UBIGEO", duplicateGeoms = TRUE)
mapdist=readOGR("LIMITE_DISTRITAL_2020_INEI.shp")
geodist22=merge(mapdist,distrital_mito1,by.x="UBIGEO",by.y="UBIGEO", duplicateGeoms = TRUE)
#geodist22=geodist22[complete.cases(geodist22@data$`% de votos no válidos`),]
tmap_mode("view")
tm_shape(geodist22) +
tm_polygons(
id="NOMBDIST",
col = "% de votos no válidos",
breaks = c(0,60.1,65.1,70.1,75.1,80.1,85.1,Inf),
pal = "BuPu" ,
colorNA = "white",
textNA = "Distrito capital sin elección",
title = "Porcentaje de participación electoral",
labels=c("0-60%","60-65%","65-70%","70-75","75-80","80-85","Más de 85")
) +
#tm_facets(by = "Eleccion", ncol = 1)+
tm_view(view.legend.position = c("left","bottom"))
distrital_mito1$'% de participación electoral'=round(distrital_mito1$V_emitidos/distrital_mito1$Electores*100,1)
library(googlesheets4)
distrital=read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vQMLHdXuz-ykbp9VmJJGhtl0vdNeeMxjgod2YrYLt9UB3RdX8tb-LEbZr2PVV41Sj384LuK1quysfNj/pub?gid=30541803&single=true&output=csv",dec=".")
distrital_mito1 =distrital%>%
filter(Eleccion=="Distrital 2022")%>%
dplyr::select(Region,Provincia,Distrito, UBIGEO,V_emitidos,V_validos,Electores,Eleccion)%>%
unique()
distrital_mito1$'% de participación electoral'=round(distrital_mito1$V_emitidos/distrital_mito1$Electores*100,1)
distrital_mito1$UBIGEO=ifelse(9999<distrital_mito1$UBIGEO&distrital_mito1$UBIGEO<100000,paste(0,distrital_mito1$UBIGEO, sep = ""), distrital_mito1$UBIGEO)
mapdist=readOGR("LIMITE_DISTRITAL_2020_INEI.shp")
geodist22=merge(mapdist,distrital_mito1,by.x="UBIGEO",by.y="UBIGEO", duplicateGeoms = TRUE)
#geodist22=geodist22[complete.cases(geodist22@data$`% de votos no válidos`),]
tmap_mode("view")
tm_shape(geodist22) +
tm_polygons(
id="NOMBDIST",
col = "% de participación electoral",
breaks = c(0,60.1,65.1,70.1,75.1,80.1,85.1,Inf),
pal = "BuPu" ,
colorNA = "white",
textNA = "Distrito capital sin elección",
title = "Porcentaje de participación electoral",
labels=c("0-60%","60-65%","65-70%","70-75","75-80","80-85","Más de 85")
) +
#tm_facets(by = "Eleccion", ncol = 1)+
tm_view(view.legend.position = c("left","bottom"))
